<section class="card checkins">
  <form name="myform"
    ng-submit="addComment()"
    novalidate>

    <div class="textintro">
      <h1>{{ talk.name }}</h1>
      <p>Fill out this form to check-in or go
      <a ng-href="#/talks">back to talks</a></p>

      <p class="error formerror" ng-show="message">{{ message }}</p>
    </div>

    <fieldset>
      <input type="text" name="title" placeholder="Title"
      ng-model="user.title" ng-required="true">
      <p class="error validationerror"
      ng-show="myform.title.$invalid && myform.title.$touched">
      Title required</p>

      <input type="text" name="comment" placeholder="Comment"
      ng-model="user.comment" ng-required="true">
      <p class="error validationerror"
      ng-show="myform.comment.$invalid && myform.comment.$touched">
      Comment required</p>

    </fieldset>

    <button type="submit" class="btn"
    ng-disabled="myform.$invalid">Comment</button>
  </form>

  <div class="card commentslist">

    <h1>Comments</h1>
    <p>Here's a list of your lastest comments</p>

    <div class="search cf">
      <h2>Search Comment</h2>
      <input type="text" ng-model="query" placeholder="Search for users">

      <div class="formgroup">
        <span class="label">by: </span>
        <select ng-model="order">
          <option value="title">Title</option>
          <option value="comment">comment</option>
          <option value="data">Date</option>
        </select>
      </div><!-- formgroup -->

      <div class="formgroup">
        <input id="dirascending" type="radio"
          ng-model="direction" name="direction">
        <label for="dirascending">asc</label>&nbsp;

        <input id="dirdescending" type="radio"
          ng-model="direction" name="direction" value="reverse">
        <label for="dirdescending">desc</label>
      </div><!-- formgroup -->

      <div ng-show="currentUser" class="buttons cf">

        <button ng-hide="recordId" class="btn btn-pick"
          ng-click="pickRandom()">Pick Random</button>

        <button ng-show="recordId" class="btn btn-pick"
          ng-click="recordId=''">Reset</button>

      </div>

    </div><!-- search -->

    <ul class="userlist cf">
      <li ng-class="comment.userState" ng-repeat="comment in comments | orderBy: order:direction | filter: { $id: recordId, $: query }">
        <div class="comment">
          <div class="buttons" ng-show="currentUser">
            <button class="btn btn-delete tooltip"
              ng-click="deleteComment(comment.$id)">
              <span>Delete this comment</span>
            </button>
            <button class="btn btn-love tooltip"
              ng-click="showReply(comment)">
              <span>Reply</span>
            </button>
          </div><!-- buttons -->
          <div class="info">
            <h2>{{ comment.title }} {{ comment.comment }}</h2>
            <div class="date">
              {{ comment.date | date: "MMM d, yy h:mm a" }}
            </div><!-- date -->
          </div><!-- info -->
          <div class="showcomments" ng-show="comment.show">
            <form class="cf"
              ng-submit="giveReply(comment, comment.replyText)"
              novalidate>
              <input type="text" name="replyText" placeholder="What do you think?"
              ng-model="comment.replyText" ng-required="true">
              <button type="submit" class="btn" ng-disabled="myform.$invalid">+</button>
            </form>

            <ul class="awardslist cf">
              <li class="cf" ng-repeat="(key, reply) in comment.replies">
                <div class="reply">{{ reply.name }}
                  <div class="buttons" ng-show="currentUser">
                    <button class="btn btn-delete award tooltip"
                      ng-click="deleteReply(comment.$id, key)">
                      <span>Delete this award</span>
                    </button>
                  </div><!-- buttons -->
                </div><!-- reply -->
              </li>
            </ul>
          </div><!-- showcomments -->
        </div><!-- comment -->
      </li>
    </ul>
    </div>
</section>
