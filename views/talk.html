<section class="card checkins">
  <form name="myform"
    ng-submit="addComment()"
    novalidate>

    <div class="textintro">
      <h1>{{ talk.name }}</h1>
      <p>Fill out this form to comment or
      <a ng-href="#/talks">go back to talks</a></p>

      <p class="error formerror" ng-show="message">{{ message }}</p>
    </div>

    <fieldset class="untouched">
      <input type="text" name="title" placeholder="Title"
      ng-model="user.commentTitle" ng-required="true">

      <input type="text" name="comment" placeholder="Comment"
      ng-model="user.commentText" ng-required="true">
    </fieldset>

    <button type="submit" class="btn"
    ng-disabled="myform.$invalid">Comment</button>
  </form>

  <div class="card commentslist">

    <h1>Comments</h1>

    <div class="search cf">
      <h2>Search Comment</h2>
      <input type="text" ng-model="query" placeholder="Search for users">

      <div class="formgroup">
        <span class="label">by: </span>
        <select ng-model="order">
          <option value="title">Title</option>
          <option value="comment">comment</option>
          <option value="data">Date</option>
        </select>
      </div><!-- formgroup -->

      <div class="formgroup">
        <input id="dirascending" type="radio"
          ng-model="direction" name="direction">
        <label for="dirascending">asc</label>&nbsp;

        <input id="dirdescending" type="radio"
          ng-model="direction" name="direction" value="reverse">
        <label for="dirdescending">desc</label>
      </div><!-- formgroup -->

      <div ng-show="currentUser" class="buttons cf">

        <button ng-hide="recordId" class="btn btn-pick"
          ng-click="pickRandom()">Pick Random</button>

        <button ng-show="recordId" class="btn btn-pick"
          ng-click="recordId=''">Reset</button>

      </div>

    </div><!-- search -->

    <ul class="userlist cf">
      <li ng-class="comment.userState" ng-repeat="comment in comments | orderBy: order:direction | filter: { $id: recordId, $: query }">
        <div class="comment">
          <div class="buttons">
            <button class="btn btn-delete tooltip"
              ng-show="allowEditComment(comment)"
              ng-click="deleteComment(comment.$id)">
              <span>Delete this comment</span>
            </button>
            <button class="btn btn-love tooltip"
              ng-click="showReply(comment)">
              <span>Reply</span>
            </button>
          </div><!-- buttons -->
          <div class="info">
            <h2>{{ comment.title }}</h2>
            <p>{{ comment.comment }}</p>
            <div class="date">
              {{ comment.date | date: "MMM d, yy h:mm a" }}
            </div><!-- date -->
          </div><!-- info -->
          <div class="showcomments" ng-show="comment.show">
            <form name="replyForm"
              class="cf"
              ng-submit="addReply(comment, comment.replyText)"
              novalidate>
              <span class="untouched">
                <input type="text" name="replyText" placeholder="What do you think?"
                ng-model="comment.replyText" ng-required="true">
              </span>
              <button type="submit" class="btn" ng-disabled="replyForm.$invalid">+</button>
            </form>

            <ul class="awardslist cf">
              <li class="cf" ng-repeat="reply in comment.replies">
                <div class="reply">{{ reply.reply }}
                  <div class="buttons">
                    <button class="btn btn-delete award tooltip"
                      ng-show="allowEditReply(reply)"
                      ng-click="deleteReply(comment.$id, reply.$id)">
                      <span>Delete this reply</span>
                    </button>
                  </div><!-- buttons -->
                </div><!-- reply -->
              </li>
            </ul>
          </div><!-- showcomments -->
        </div><!-- comment -->
      </li>
    </ul>
    </div>

</section>
